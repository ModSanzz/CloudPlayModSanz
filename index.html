<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CloudPlay Admin Panel</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<style>
:root{
--primary:#C77DFF;
--secondary:#282828;
--bg:#121212;
--text:#fff;
--muted:#aaa;
--danger:#ff4d4d;
--valid:#4caf50;
--glow:0 0 8px rgba(199,125,255,.7);
}
body{margin:0;font-family:Roboto;background:var(--bg);color:var(--text)}
header{padding:15px;text-align:center;font-size:1.6rem;font-weight:700;color:var(--primary)}
.search-bar{display:flex;justify-content:center;margin:10px}
.search-bar input{flex:1;padding:8px;border-radius:5px 0 0 5px;border:none;background:#222;color:#fff}
.search-bar button{padding:8px;background:var(--primary);border:none;color:#fff;border-radius:0 5px 5px 0;cursor:pointer}
.filters{display:flex;justify-content:center;margin:10px;gap:5px}
.filters button{padding:5px 10px;border:none;border-radius:20px;background:#333;color:#fff;cursor:pointer}
.filters button.active{background:var(--primary)}
.user-card{display:flex;justify-content:space-between;align-items:center;padding:10px;margin:5px;border-radius:10px;background:#222;border:2px solid transparent;box-shadow:var(--glow)}
.user-card.valid{border-color:var(--primary)}
.user-info{display:flex;flex-direction:column;gap:3px}
.status-actions{display:flex;align-items:center;gap:5px}
.status-tag{padding:2px 8px;border-radius:5px;background:var(--valid);color:#fff;font-weight:700;font-size:0.8rem}
.status-actions button{border:none;padding:5px 8px;border-radius:5px;cursor:pointer;background:#333}
.status-actions button.edit{color:#aaa}
.status-actions button.delete{color:var(--danger)}
.date-shortcuts{display:flex;gap:5px;flex-wrap:wrap;margin:5px 0}
.date-shortcuts button{padding:5px 10px;border:none;border-radius:5px;background:var(--primary);color:#fff;cursor:pointer}
#addBtn{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);width:60px;height:60px;border-radius:50%;background:var(--primary);border:none;color:#fff;font-size:1.8rem;cursor:pointer;box-shadow:var(--glow)}
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:none;justify-content:center;align-items:center}
.modal-content{background:#222;padding:20px;border-radius:10px;width:90%;max-width:400px;display:flex;flex-direction:column;gap:10px}
.modal-content input[type=text], .modal-content input[type=date]{padding:8px;border-radius:5px;border:none;background:#333;color:#fff}
.modal-content label{font-size:0.9rem;color:#fff}
.modal-content .btns{display:flex;justify-content:flex-end;gap:10px}
.modal-content .btns button{padding:5px 10px;border:none;border-radius:5px;cursor:pointer}
</style>
</head>
<body>
<header>CloudPlay Admin Panel</header>

<div class="search-bar">
<input type="text" id="search" placeholder="Search Build/Device ID...">
<button onclick="renderList()">üîç</button>
</div>

<div class="filters">
<button onclick="setFilter('all')" id="fAll" class="active">All (<span id="countAll">0</span>)</button>
<button onclick="setFilter('valid')" id="fValid">Valid (<span id="countValid">0</span>)</button>
<button onclick="setFilter('expired')" id="fExpired">Expired (<span id="countExpired">0</span>)</button>
</div>

<div id="userList"></div>

<button id="addBtn" onclick="openModal()">+</button>

<div class="modal" id="modal">
<div class="modal-content">
<label>ID / Build</label>
<input type="text" id="idInput">
<label>Username</label>
<input type="text" id="userInput">
<label>Expire</label>
<input type="date" id="dateInput">
<div class="date-shortcuts">
<button onclick="setExpiryShortcut(1)">+1 Hari</button>
<button onclick="setExpiryShortcut(7)">+7 Hari</button>
<button onclick="setExpiryShortcut(30)">+30 Hari</button>
<button onclick="setExpiryShortcut(90)">+3 Bulan</button>
<button onclick="setExpiryShortcut(365)">+1 Tahun</button>
<button onclick="setExpiryPermanent()">Permanent</button>
</div>
<label><input type="checkbox" id="maintenanceToggle"> Maintenance</label>
<div class="btns">
<button onclick="closeModal()">Batal</button>
<button onclick="saveID()">Simpan</button>
</div>
</div>
</div>

<script>
let data={
"Qtrtq5261e1r":{username:"@Snanbavz",date:"2026-01-31",maintenance:false},
"Wt62562":{username:"@Sanz",date:"2027-04-30",maintenance:false}
};
let filter="all";

function renderList(){
const ul=document.getElementById("userList");
ul.innerHTML="";
const search=document.getElementById("search").value.toLowerCase();
let cAll=0,cValid=0,cExp=0;
for(let k in data){
let d=data[k];
let exp=new Date(d.date)<new Date();
let status=d.maintenance?"MAINT":"";
if(!k.toLowerCase().includes(search)&&!d.username.toLowerCase().includes(search)) continue;
cAll++;
if(exp)cExp++;else cValid++;
if(filter==="valid"&&exp) continue;
if(filter==="expired"&&!exp) continue;
let card=document.createElement("div");
card.className="user-card "+(exp?"":"valid");
card.innerHTML=`
<div class="user-info">
<strong>${k}</strong>
<span>User: ${d.username}<br>Expire: ${d.date}${status?" | Maintenance":""}</span>
</div>
<div class="status-actions">
<span class="status-tag">${exp?"EXPIRED":"VALID"}</span>
<button class="edit" onclick="edit('${k}')"><i class="fa fa-edit"></i></button>
<button class="delete" onclick="del('${k}')"><i class="fa fa-trash"></i></button>
</div>`;
ul.appendChild(card);
}
document.getElementById("countAll").textContent=cAll;
document.getElementById("countValid").textContent=cValid;
document.getElementById("countExpired").textContent=cExp;
}

function setFilter(f){
filter=f;
document.getElementById("fAll").classList.remove("active");
document.getElementById("fValid").classList.remove("active");
document.getElementById("fExpired").classList.remove("active");
document.getElementById("f"+f.charAt(0).toUpperCase()+f.slice(1)).classList.add("active");
renderList();
}

function openModal(id=""){
document.getElementById("modal").style.display="flex";
if(id){
document.getElementById("idInput").value=id;
document.getElementById("userInput").value=data[id].username;
document.getElementById("dateInput").value=data[id].date;
document.getElementById("maintenanceToggle").checked=data[id].maintenance;
}else{
document.getElementById("idInput").value="";
document.getElementById("userInput").value="";
document.getElementById("dateInput").value="";
document.getElementById("maintenanceToggle").checked=false;
}
}

function closeModal(){document.getElementById("modal").style.display="none"}

function saveID(){
let id=document.getElementById("idInput").value;
let user=document.getElementById("userInput").value;
let date=document.getElementById("dateInput").value;
let maint=document.getElementById("maintenanceToggle").checked;
if(!id||!user||!date){alert("Lengkapi semua field");return;}
data[id]={username:user,date:date,maintenance:maint};
closeModal();
renderList();
}

function del(id){if(confirm("Hapus ID ini?")){delete data[id];renderList()}}

function edit(id){openModal(id)}

function setExpiryShortcut(days){
let d=new Date();
d.setDate(d.getDate()+days);
document.getElementById("dateInput").value=d.toISOString().split("T")[0];
}

function setExpiryPermanent(){
document.getElementById("dateInput").value="9999-12-31";
}

setInterval(renderList,1000); // auto update status

renderList();
</script>
</body>
</html>
